<div *ngIf="workoutSuccessMessage" class="alert alert-success alert-dismissible fade show m-2" role="alert">
  {{ workoutSuccessMessage }}
  <button type="button" class="btn-close" aria-label="Close" (click)="workoutSuccessMessage = undefined"></button>
</div>

<div *ngIf="exerciseSuccessMessage" class="alert alert-success alert-dismissible fade show m-2" role="alert">
  {{ exerciseSuccessMessage }}
  <button type="button" class="btn-close" aria-label="Close" (click)="exerciseSuccessMessage = undefined"></button>
</div>

<div class="container">
  <div class="row justify-content-center">
    <div class="col-lg-6">
      <app-search-exercise (initSearchValue)="initSearchValue($event)"></app-search-exercise>
    </div>
  </div>

  <div class="row justify-content-center mb-4">
    <div class="col-lg-3">
      <app-body-part-exercise-filter (filterEvent)="updateFilterObj($event)"></app-body-part-exercise-filter>
    </div>
    <div class="col-lg-3">
      <app-equipment-exercise-filter (filterEvent)="updateFilterObj($event)"></app-equipment-exercise-filter>
    </div>
    <div class="col-lg-3">
      <app-target-exercise-filter (filterEvent)="updateFilterObj($event)"></app-target-exercise-filter>
    </div>
  </div>

  <div class="row row-cols-3 g-4">
    <div class="col" *ngFor="let tempExercise of exercises">
      <div class="card" style="margin-bottom: 60px">
        <img src="{{ tempExercise.gifUrl }}" class="card-img-top" alt="{{ tempExercise.name }}" />
        <div class="card-body text-center">
          <a routerLink="/exercise/details/{{tempExercise.id}}">
            <h5 class="card-title">{{ tempExercise.name }}</h5>
          </a>
          <p class="card-text">Target: {{ tempExercise.target }}</p>
          <p class="card-text">Bodypart: {{ tempExercise.bodyPart }}</p>
          <p class="card-text">Equipment: {{ tempExercise.equipment }}</p>
          <button [disabled]="workoutId === undefined" class="btn btn-primary" (click)="addToWorkout(tempExercise)">Add to workout</button>
        </div>
      </div>
    </div>
  </div>

  <div class="row d-flex justify-content-center align-items-center m-3" *ngIf="exercises.length === 0 && dataRecieved === false">
    <div class="spinner-border text-primary" role="status" style="width: 5rem; height: 5rem;">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
  
  <div class="row d-flex justify-content-center align-items-center m-3" *ngIf="exercises.length === 0 && dataRecieved === true">
    <h2 class="text-center mt-2"> No exercises found with those filter options </h2>
  </div>


  <div *ngIf="exercises.length > 0">
    <div class="row">
      <div class="col-md-6"></div>
      <div class="col-md-6">
        <div class="row justify-content-end">
          <div class="col-md-9">
            <ngb-pagination [(page)]="currentPage" [pageSize]="pageSize" [collectionSize]="totalElements"
              (pageChange)="listExercises()" [maxSize]="3" [boundaryLinks]="true" class="pagination-centered">
            </ngb-pagination>
          </div>
          <div class="col-md-3">
            <div class="d-flex justify-content-end">
              <span class="mt-2">Page Size</span>
              <select [(ngModel)]="pageSize" (ngModelChange)="updatePageSize()">
                <option selected="true">50</option>
                <option>75</option>
                <option>100</option>
                <option>125</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


</div>